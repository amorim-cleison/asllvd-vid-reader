; Listing generated by Microsoft (R) Optimizing Compiler Version 15.00.21022.08 

	TITLE	y:\asl\software\video_compressor\vid_reader\zlib\zlib-1.2.3\contrib\masmx86\gvmat32c.c
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB OLDNAMES

EXTRN	_cpudetect32:PROC
EXTRN	_longest_match_7fff:PROC
EXTRN	_longest_match_686:PROC
_iIsPPro DD	02H
PUBLIC	_longest_match
; Function compile flags: /Odtp
; File y:\asl\software\video_compressor\vid_reader\zlib\zlib-1.2.3\contrib\masmx86\gvmat32c.c
;	COMDAT _longest_match
_TEXT	SEGMENT
_s$ = 8							; size = 4
_cur_match$ = 12					; size = 4
_longest_match PROC					; COMDAT

; 50   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 51   :     if (iIsPPro!=0)

  00003	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR _iIsPPro, 0
  0000a	74 12		 je	 SHORT $LN2@longest_ma

; 52   :         return longest_match_686(s,cur_match);

  0000c	8b 45 0c	 mov	 eax, DWORD PTR _cur_match$[ebp]
  0000f	50		 push	 eax
  00010	8b 4d 08	 mov	 ecx, DWORD PTR _s$[ebp]
  00013	51		 push	 ecx
  00014	e8 00 00 00 00	 call	 _longest_match_686
  00019	83 c4 08	 add	 esp, 8
  0001c	eb 2e		 jmp	 SHORT $LN3@longest_ma
$LN2@longest_ma:

; 53   : 
; 54   :     if (s->w_mask != 0x7fff)

  0001e	8b 55 08	 mov	 edx, DWORD PTR _s$[ebp]
  00021	81 7a 34 ff 7f
	00 00		 cmp	 DWORD PTR [edx+52], 32767 ; 00007fffH
  00028	74 12		 je	 SHORT $LN1@longest_ma

; 55   :         return longest_match_686(s,cur_match);

  0002a	8b 45 0c	 mov	 eax, DWORD PTR _cur_match$[ebp]
  0002d	50		 push	 eax
  0002e	8b 4d 08	 mov	 ecx, DWORD PTR _s$[ebp]
  00031	51		 push	 ecx
  00032	e8 00 00 00 00	 call	 _longest_match_686
  00037	83 c4 08	 add	 esp, 8
  0003a	eb 10		 jmp	 SHORT $LN3@longest_ma
$LN1@longest_ma:

; 56   : 
; 57   :     /* now ((s->w_mask == 0x7fff) && (iIsPPro==0)) */
; 58   :         return longest_match_7fff(s,cur_match);

  0003c	8b 55 0c	 mov	 edx, DWORD PTR _cur_match$[ebp]
  0003f	52		 push	 edx
  00040	8b 45 08	 mov	 eax, DWORD PTR _s$[ebp]
  00043	50		 push	 eax
  00044	e8 00 00 00 00	 call	 _longest_match_7fff
  00049	83 c4 08	 add	 esp, 8
$LN3@longest_ma:

; 59   : }

  0004c	5d		 pop	 ebp
  0004d	c3		 ret	 0
_longest_match ENDP
_TEXT	ENDS
PUBLIC	_match_init
; Function compile flags: /Odtp
;	COMDAT _match_init
_TEXT	SEGMENT
_match_init PROC					; COMDAT

; 43   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 44   :     iIsPPro = (((cpudetect32()/0x100)&0xf)>=6) ? 1 : 0;

  00003	e8 00 00 00 00	 call	 _cpudetect32
  00008	c1 e8 08	 shr	 eax, 8
  0000b	83 e0 0f	 and	 eax, 15			; 0000000fH
  0000e	83 f8 06	 cmp	 eax, 6
  00011	1b c0		 sbb	 eax, eax
  00013	83 c0 01	 add	 eax, 1
  00016	a3 00 00 00 00	 mov	 DWORD PTR _iIsPPro, eax

; 45   : }

  0001b	5d		 pop	 ebp
  0001c	c3		 ret	 0
_match_init ENDP
END
